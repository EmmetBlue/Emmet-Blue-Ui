function getIPs(n){function e(e){var i=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/,t=i.exec(e)[1];void 0===o[t]&&n(t),o[t]=!0}var o={},i=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,t=!!window.webkitRTCPeerConnection;if(!i){var c=iframe.contentWindow;i=c.RTCPeerConnection||c.mozRTCPeerConnection||c.webkitRTCPeerConnection,t=!!c.webkitRTCPeerConnection}var a={optional:[{RtpDataChannels:!0}]},r={iceServers:[{urls:"stun:stun.services.mozilla.com"}]},d=new i(r,a);d.onicecandidate=function(n){n.candidate&&e(n.candidate.candidate)},d.createDataChannel(""),d.createOffer(function(n){d.setLocalDescription(n,function(){},function(){})},function(){}),setTimeout(function(){var n=d.localDescription.sdp.split("\n");n.forEach(function(n){0===n.indexOf("a=candidate:")&&e(n)})},1e3)}getIPs(function(n){console.log(n)});
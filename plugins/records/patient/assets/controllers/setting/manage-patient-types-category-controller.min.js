angular.module("EmmetBlue").controller("recordsPatientSettingManagePatientTypesCategoryController",function(e,t){function a(){e.categorydtInstance.reloadData()}var o={actionMarkups:{categoryActionMarkup:function(e){var t="editCategory("+e.CategoryID+")",a="deleteCategory("+e.CategoryID+")",o="data-option-id='"+e.CategoryID+"' data-option-name='"+e.CategoryName+"' data-option-description='"+e.CategoryDescription+"'",n="<button class='btn btn-patient-type-category btn-default' ng-click=\""+t+'" '+o+"> Edit</button>",r="<button class='btn btn-patient-type-category btn-default' ng-click=\""+a+'" '+o+"> Delete</button>",i="<div class='btn-group'>"+n+r+"</div>";return i}}};e.categorydtOptions=t.DT.optionsBuilder.fromFnPromise(function(){var e=t.serverRequest("/patients/patient-type-category/view","GET");return e}).withPaginationType("full_numbers").withDisplayLength(10).withOption("createdRow",function(a){t.compile(angular.element(a).contents())(e)}).withOption("headerCallback",function(a){e.headerCompiled||(e.headerCompiled=!0,t.compile(angular.element(a).contents())(e))}).withButtons([{text:"New Category",action:function(){e.newCategory={},$("#new_setting_records_patient_category").modal("show")}},{extend:"print",text:"<u>P</u>rint this data page"},{extend:"copy",text:"<u>C</u>opy this data"}]),e.categorydtColumns=[t.DT.columnBuilder.newColumn("CategoryName").withTitle("Category"),t.DT.columnBuilder.newColumn(null).withTitle("Action").renderWith(o.actionMarkups.categoryActionMarkup).notSortable()],e.categorydtInstance={},e.tempHolder={},e.editCategory=function(t){e.tempHolder.CategoryName=$(".btn-patient-type-category[data-option-id='"+t+"']").attr("data-option-name"),e.tempHolder.CategoryDescription=$(".btn-patient-type-category[data-option-id='"+t+"']").attr("data-option-description"),e.tempHolder.resourceId=t,$("#edit_setting_records_patient_category").modal("show")},e.deleteCategory=function(o){var n="Delete Prompt",r="You are about to delete the category named "+$(".btn-patient-type-category[data-option-id='"+o+"']").attr("data-option-name")+". Do you want to continue? Please note that this action cannot be undone",i=!0;e._categoryId=o;var s=function(){var o=t.serverRequest("/patients/patient-type-category/delete?"+t.serializeParams({resourceId:e._categoryId}),"DELETE");o.then(function(){t.alert("Operation Successful","The selected category has been deleted successfully","success","notify"),delete e._groupId,a()},function(e){t.errorHandler(e)})},c="warning",d="Delete";t.confirm(n,r,i,s,c,d)},e.saveEditCategory=function(){var o=e.tempHolder;$(".loader").addClass("show");var n=t.serverRequest("/patients/patient-type-category/edit","PUT",o);n.then(function(){$(".loader").removeClass("show"),t.alert("Operation Successful","Your changes has been saved successfully","success","notify"),$("#edit_setting_records_patient_category").modal("hide"),a()},function(e){$(".loader").removeClass("show"),t.errorHandler(e)})},e.saveNewCategory=function(){var o=e.newCategory;$(".loader").addClass("show");var n=t.serverRequest("/patients/patient-type-category/new","POST",o);n.then(function(){$(".loader").removeClass("show"),t.alert("Operation Successful","You have successfully creaed a new category","success","notify"),$("#new_setting_records_patient_category").modal("hide"),e.newCategory={},a()},function(e){$(".loader").removeClass("show"),t.errorHandler(e)})}});
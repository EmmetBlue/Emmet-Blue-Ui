<script src="assets/js/plugins/forms/selects/select2.min.js"></script>
<script>$('select.select').select2();</script>
<script src="plugins/records/patient/assets/js/webcam-controller.js"></script>

<div ng-controller="recordsPatientManagePatientsController as ctrller">
	<div class="panel panel-white zoomIn">
		<div class="panel-heading">
			<h6 class="panel-title">Patient Records Management <button class="btn btn-warning pull-right" data-toggle="modal" data-target="#new_patient">Register a new patient</button></h6>
		</div>

		<div class="panel-body">
			<div class="table-responsive col-md-3">
				<table datatable="" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstance" class="table table-condensed table-hover">

				</table>
			</div>
			<div class="col-md-9">
				<div class="row">		
					<!-- Profile info -->
					<div class="panel panel-flat">
						<div class="panel-heading">
							<h6 class="panel-title">Profile information</h6>
							<div class="heading-elements">
								<ul class="icons-list">
			                		<li><a data-action="collapse"></a></li>
			                		<li><a data-action="reload"></a></li>
			                		<li><a data-action="close"></a></li>
			                	</ul>
		                	</div>
						</div>

						<div class="panel-body">
							<div class="table-responsive col-md-9">
								<table class="table table-striped table-hover col-md-12">
									<thead>
										<tr>
											<th><small class="pull-right">Filter</small></th>
											<th><input class="form-control"/></th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="(key, val) in patientProfile">
											<th class="text-thin	">{{key}}</th>
											<th class="text-default">{{val}}</th>
										</tr>
									</tbody>
								</table>
							</div>

							<div class="col-md-3 pull-right">
								<div class="thumbnail">
									<div class="thumb thumb-square thumb-slide">
										<img src="{{patientProfileMeta.PatientPicture}}" class="img img-responsive" style="height: 150px; !important;" alt="">
										<div class="caption">
											<span>
												<a href="#" class="btn bg-success-400 btn-icon btn-xs"><i class="icon-plus2"></i></a>
											</span>
										</div>
									</div>
									<div class="text-center">
							    		<h6 class="text-semibold no-margin">{{patientProfileMeta.PatientFullName}} <small class="display-block">Picture</small></h6>
				    				</div>
						    	</div>
						    	<div class="thumbnail" ng-repeat="image in patientProfileMeta.PatientIdentificationDocumentUrl">
									<div class="thumb thumb-square thumb-slide">
										<img src="{{utils.getImageServerAddress(image)}}" class="img img-responsive" style="height: 150px; !important;" alt="">
										<div class="caption">
											<span>
												<a href="#" class="btn bg-success-400 btn-icon btn-xs"><i class="icon-plus2"></i></a>
											</span>
										</div>
									</div>
									<div class="text-center">
							    		<h6 class="text-semibold no-margin">Verified <small class="display-block">Proof of Identity</small></h6>
				    				</div>
						    	</div>
							</div>
						</div>
					</div>
					<!-- /profile info -->
				</div>	
			</div>
		</div>
	</div>

	<div id="new_patient" class="modal fade">
		<div class="modal-dialog modal-full">
			<div class="modal-content">
				<div class="modal-header bg-warning">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h6 class="modal-title">Service User Registration</h6>
				</div>

				<div class="modal-body">
					<form role="form">
						<div class="col-md-8">
							<fieldset>
								<legend>
									<div class="btn-group">
										<button class="btn btn-default btn-sm"><i class="fa fa-building-o"></i> Add Hospital History Information</button>
										<button class="btn btn-default btn-sm"><i class="fa fa-bed"></i> Add Diagnosis Information</button>
									</div>
								</legend>
								<div class="row">
								<div class="form-group col-sm-2">
										<label class="control-label">Title</label>
										<input type="text" class="form-control" ng-model="newPatient.title">
									</div>
									<div class="form-group col-sm-5">
										<label class="control-label">Surname</label>
										<input type="text" class="form-control" ng-model="newPatient.firstName">
									</div>
									<div class="form-group col-sm-5">
										<label>Other Names</label>
										<input type="text" class="form-control" ng-model="newPatient.lastName">
									</div>
								</div>
								<div class="row">
									<div class="form-group col-sm-6">
										<label>Date Of Birth</label>
										<input type="date" class="form-control" ng-model="newPatient.dateOfBirth">
									</div>
									<div class="form-group col-sm-3">
										<label class="control-label">Gender</label>
										<span><br/></span>
										<label class="radio-inline">
											<input type="radio" name="gender" value="Male" class="styled" ng-model="newPatient.gender">
											Male
										</label>

										<label class="radio-inline">
											<input type="radio" name="gender" value="Female" class="styled" ng-model="newPatient.gender">
											Female
										</label>
									</div>
									<div class="form-group col-sm-3">
										<label class="control-label">Marital Status</label>
										<span><br/></span>
										<label class="radio-inline">
											<input type="radio" name="radio-inline-left" value="Single" class="styled" ng-model="newPatient.maritalStatus">
											Single
										</label>

										<label class="radio-inline">
											<input type="radio" name="radio-inline-left" value="Married" class="styled" ng-model="newPatient.maritalStatus">
											Married
										</label>
									</div>
								</div>
								<div class="row">
									<div class="form-group col-sm-4">
										<label class="control-label">Address</label>
										<input type="text" class="form-control" ng-model="newPatient.homeAddress">
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Mother's Maiden Name</label>
										<input type="text" class="form-control" ng-model="newPatient.motherMaidenName">
									</div>
									<div class="form-group col-sm-4">
										<label>Medical Hand Card Number</label>
										<input type="text" class="form-control" ng-model="newPatient.medicalHandCard">
									</div>
								</div>
								<div class="row">
									<div class="form-group col-sm-4">
										<label class="control-label">Phone Numbers <small>(separate with comma)</small></label>
										<input class="form-control input-lg" ng-model="newPatient.phoneNumber"/>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Reference Contact <small>(emergency)</small></label>
										<input class="form-control input-lg" ng-model="newPatient.referenceContactEmergency"/>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Reference Contact <small>(minor/incapacitation)</small></label>
										<input class="form-control input-lg" ng-model="newPatient.referenceContactMinor"/>
									</div>
								</div>
								<div class="row">
									<div class="form-group col-sm-4">
										<label class="control-label">State Of Origin</label>
										<select class="select" ng-model="newPatient.stateOfOrigin">
											<option value=""></option>
										</select>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Local Govt. Area</label>
										<select class="select" ng-model="newPatient.lga">
											<option value=""></option>
										</select>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">State Of Residence</label>
										<select class="select" ng-model="newPatient.stateOfResidence">
											<option value=""></option>
										</select>
									</div>
								</div>

								<div class="row">
									<div class="form-group col-sm-4">
										<label class="control-label">Religion</label>
										<select class="select" ng-model="newPatient.religion">
											<option value="christianity">Christianity</option>
											<option value="islam">Islam</option>
											<option value="others">Others</option>
										</select>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Occupation</label>
										<input class="form-control input-lg" ng-model="newPatient.occupation"/>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Tribe</label>
										<select class="select" ng-model="newPatient.tribe">
											<option value=""></option>
										</select>
									</div>
								</div>
								<div class="form-group col-sm-6">
									<label>E-Mail Address</label>
									<input type="text" class="form-control" ng-model="newPatient.emailAddress">
								</div>
								<div class="form-group col-sm-6">
									<label>Next Of Kin</label>
									<input type="text" class="form-control" ng-model="newPatient.nextOfKin">
								</div>
								<div class="form-group col-sm-4">
									<label>Mode Of Arrival</label>
									<input type="text" class="form-control" ng-model="newPatient.modeOfArrival">
								</div>
								<div class="form-group col-sm-4">
									<label>Accompanied By</label>
									<input type="text" class="form-control" ng-model="newPatient.accompaniedBy">
								</div>
								<div class="form-group col-sm-4">
									<label>Referrer Source</label>
									<input type="text" class="form-control" ng-model="newPatient.referrerSource">
								</div>
							</fieldset>
							<button class="btn btn-warning btn-lg col-md-4 col-md-offset-4" id="save-all">Submit</button>
						</div>
						<div class="col-md-4">
							<div class="panel panel-default col-md-11 col-md-offset-1">
				                <div class="panel-heading">
				                  <h6 class="panel-title">Upload Patient Picture</h6>
				                </div>
				                <div class="panel-body" id="camera">
				                  <img src="plugins/records/patient/assets/images/passport-placeholder.png" class="col-md-12 img img-responsive" style="width:100% !important; height: 100% !important;"/>
				                </div><!-- /.panel-body -->
				                 <input type="hidden" id="patient-passport"/>
				                <div class="panel-footer">
									<div class="text-center">
										<button class="btn btn-info" onClick="enableCamera()" ng-click="eDisablers('enable')" ng-show="disablers.enable_camera"><i class="icon-camera"></i> Enable Camera</button>
										<button class="btn btn-success" onClick="takeSnapshot()" ng-click="eDisablers('take')" ng-show="disablers.take_snapshot"><i class="icon-play"></i> Take Snapshot</button>
										<button class="btn btn-danger" onClick="retakeSnapshot()" ng-click="eDisablers('retake')" ng-show="disablers.snapshot_taken"><i class="icon-undo"></i> Retake Snapshot</button>
									</div>
				                </div>
			              </div><!-- /.panel -->
			              <div class="dropzone col-md-11 col-md-offset-1"
						     ng-dropzone
						     dropzone="dropzone"
						     dropzone-config="ctrller.dropzoneConfig">
						     <div class="dropzone-previews"></div>
					  	</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-link" data-dismiss="modal" ng-click="newPatient = {}">Close</button>
				</div>
			</div>
		</div>
	</div>
</div>
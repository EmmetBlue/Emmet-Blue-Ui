<script src="assets/js/plugins/forms/selects/select2.min.js"></script>
<script>$('select.select').select2();</script>
<script src="plugins/records/patient/assets/js/webcam-controller.js"></script>

<div ng-controller="recordsPatientManagePatientsController as ctrller">
	<div class="panel panel-white zoomIn">
		<div class="panel-heading">
			<h6 class="panel-title">Patient Records Management <button class="btn btn-warning pull-right" data-toggle="modal" data-target="#new_patient">Register a new patient</button></h6>
		</div>

		<div class="panel-body">
			<div class="table-responsive col-md-12" id="patientTable">
				<table datatable="" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstance" class="table table-condensed table-hover">

				</table>
			</div>
			<div class="col-md-9" id="profileTable" ng-show="profileSelected">
				<div class="row">		
					<!-- Profile info -->
					<div class="panel panel-flat">
						<div class="panel-heading">
							<h6 class="panel-title">Profile information</h6>
							<div class="heading-elements">
								<ul class="icons-list">
			                		<li><a data-action="collapse"></a></li>
			                		<li><a data-action="reload"></a></li>
			                		<li><a data-action="close"></a></li>
			                	</ul>
		                	</div>
						</div>

						<div class="panel-body">
							<div class="table-responsive col-md-9">
								<table class="table table-striped table-hover col-md-12">
									<thead>
										<tr>
											<th><small class="pull-right">Filter</small></th>
											<th><input class="form-control" ng-model="filterPatientFields"/></th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="(key, val) in patientProfile">
											<th class="text-thin">{{key}}</th>
											<th class="text-default">{{val}}</th>
										</tr>
									</tbody>
								</table>
							</div>

							<div class="col-md-3 pull-right">
								<div class="thumbnail">
									<div class="thumb thumb-square thumb-slide">
										<img src="{{patientProfileMeta.PatientPicture}}" class="img img-responsive" style="height: 150px; !important;" alt="">
										<div class="caption">
											<span>
												<a href="#" class="btn bg-success-400 btn-icon btn-xs"><i class="icon-plus2"></i></a>
											</span>
										</div>
									</div>
									<div class="text-center">
							    		<h6 class="text-semibold no-margin">{{patientProfileMeta.PatientFullName}} <small class="display-block">Picture</small></h6>
				    				</div>
						    	</div>
						    	<div class="thumbnail" ng-repeat="image in patientProfileMeta.PatientIdentificationDocumentUrl">
									<div class="thumb thumb-square thumb-slide">
										<img src="{{utils.getImageServerAddress(image)}}" class="img img-responsive" style="height: 150px; !important;" alt="">
										<div class="caption">
											<span>
												<a href="#" class="btn bg-success-400 btn-icon btn-xs"><i class="icon-plus2"></i></a>
											</span>
										</div>
									</div>
									<div class="text-center">
							    		<h6 class="text-semibold no-margin">Verified <small class="display-block">Proof of Identity</small></h6>
				    				</div>
						    	</div>
							</div>
						</div>
					</div>
					<!-- /profile info -->
				</div>	
			</div>
		</div>
	</div>

	<div id="new_patient" class="modal fade">
		<div class="modal-dialog modal-full">
			<div class="modal-content">
				<div class="modal-header bg-warning">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h6 class="modal-title">Service User Registration</h6>
				</div>

				<div class="modal-body">
					<form role="form">
						<div class="col-md-8">
							<fieldset>
								<legend>
									<div class="btn-group">
										<button class="btn btn-default btn-sm" data-toggle="modal" data-target="#patient_hospital_history"><i class="fa fa-building-o"></i> Hospital History</button>
										<button class="btn btn-default btn-sm" data-toggle="modal" data-target="#patient_diagnosis"><i class="fa fa-bed"></i> Diagnosis</button>
										<button class="btn btn-default btn-sm" data-toggle="modal" data-target="#patient_operation"><i class="fa fa-bed"></i> Operation</button>
										<button class="btn btn-default btn-sm" data-toggle="modal" data-target="#patient_process_check"><i class="fa fa-bed"></i> Process Check</button>
									</div>
								</legend>
								<div class="row">
								<div class="form-group col-sm-2">
										<label class="control-label">Title</label>
										<input type="text" class="form-control" ng-model="newPatient.title">
									</div>
									<div class="form-group col-sm-5">
										<label class="control-label">Surname</label>
										<input type="text" class="form-control" ng-model="newPatient.firstName">
									</div>
									<div class="form-group col-sm-5">
										<label>Other Names</label>
										<input type="text" class="form-control" ng-model="newPatient.lastName">
									</div>
								</div>
								<div class="row">
									<div class="form-group col-sm-6">
										<label>Date Of Birth</label>
										<input type="date" class="form-control" ng-model="newPatient.dateOfBirth">
									</div>
									<div class="form-group col-sm-3">
										<label class="control-label">Gender</label>
										<span><br/></span>
										<label class="radio-inline">
											<input type="radio" name="gender" value="Male" class="styled" ng-model="newPatient.gender">
											Male
										</label>

										<label class="radio-inline">
											<input type="radio" name="gender" value="Female" class="styled" ng-model="newPatient.gender">
											Female
										</label>
									</div>
									<div class="form-group col-sm-3">
										<label class="control-label">Marital Status</label>
										<span><br/></span>
										<label class="radio-inline">
											<input type="radio" name="radio-inline-left" value="Single" class="styled" ng-model="newPatient.maritalStatus">
											Single
										</label>

										<label class="radio-inline">
											<input type="radio" name="radio-inline-left" value="Married" class="styled" ng-model="newPatient.maritalStatus">
											Married
										</label>
									</div>
								</div>
								<div class="row">
									<div class="form-group col-sm-4">
										<label class="control-label">Address</label>
										<input type="text" class="form-control" ng-model="newPatient.homeAddress">
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Mother's Maiden Name</label>
										<input type="text" class="form-control" ng-model="newPatient.motherMaidenName">
									</div>
									<div class="form-group col-sm-4">
										<label>Medical Hand Card Number</label>
										<input type="text" class="form-control" ng-model="newPatient.medicalHandCard">
									</div>
								</div>
								<div class="row">
									<div class="form-group col-sm-4">
										<label class="control-label">Phone Numbers <small>(separate with comma)</small></label>
										<input class="form-control input-lg" ng-model="newPatient.phoneNumber"/>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Reference Contact <small>(emergency)</small></label>
										<input class="form-control input-lg" ng-model="newPatient.referenceContactEmergency"/>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Reference Contact <small>(minor/incapacitation)</small></label>
										<input class="form-control input-lg" ng-model="newPatient.referenceContactMinor"/>
									</div>
								</div>
								<div class="row">
									<div class="form-group col-sm-4">
										<label class="control-label">State Of Origin</label>
										<select class="select" ng-model="newPatient.stateOfOrigin">
											<option value=""></option>
										</select>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Local Govt. Area</label>
										<select class="select" ng-model="newPatient.lga">
											<option value=""></option>
										</select>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">State Of Residence</label>
										<select class="select" ng-model="newPatient.stateOfResidence">
											<option value=""></option>
										</select>
									</div>
								</div>

								<div class="row">
									<div class="form-group col-sm-4">
										<label class="control-label">Religion</label>
										<select class="select" ng-model="newPatient.religion">
											<option value="christianity">Christianity</option>
											<option value="islam">Islam</option>
											<option value="others">Others</option>
										</select>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Occupation</label>
										<input class="form-control input-lg" ng-model="newPatient.occupation"/>
									</div>
									<div class="form-group col-sm-4">
										<label class="control-label">Tribe</label>
										<select class="select" ng-model="newPatient.tribe">
											<option value=""></option>
										</select>
									</div>
								</div>
								<div class="form-group col-sm-6">
									<label>E-Mail Address</label>
									<input type="text" class="form-control" ng-model="newPatient.emailAddress">
								</div>
								<div class="form-group col-sm-6">
									<label>Next Of Kin</label>
									<input type="text" class="form-control" ng-model="newPatient.nextOfKin">
								</div>
								<div class="form-group col-sm-4">
									<label>Mode Of Arrival</label>
									<input type="text" class="form-control" ng-model="newPatient.modeOfArrival">
								</div>
								<div class="form-group col-sm-4">
									<label>Accompanied By</label>
									<input type="text" class="form-control" ng-model="newPatient.accompaniedBy">
								</div>
								<div class="form-group col-sm-4">
									<label>Referrer Source</label>
									<input type="text" class="form-control" ng-model="newPatient.referrerSource">
								</div>
							</fieldset>
							<button class="btn btn-warning btn-lg col-md-4 col-md-offset-4" id="save-all">Submit</button>
						</div>
						<div class="col-md-4">
							<div class="panel panel-default col-md-11 col-md-offset-1">
				                <div class="panel-heading">
				                  <h6 class="panel-title">Upload Patient Picture</h6>
				                </div>
				                <div class="panel-body" id="camera">
				                  <img src="plugins/records/patient/assets/images/passport-placeholder.png" class="col-md-12 img img-responsive" style="width:100% !important; height: 100% !important;"/>
				                </div><!-- /.panel-body -->
				                 <input type="hidden" id="patient-passport"/>
				                <div class="panel-footer">
									<div class="text-center">
										<button class="btn btn-info" onClick="enableCamera()" ng-click="eDisablers('enable')" ng-show="disablers.enable_camera"><i class="icon-camera"></i> Enable Camera</button>
										<button class="btn btn-success" onClick="takeSnapshot()" ng-click="eDisablers('take')" ng-show="disablers.take_snapshot"><i class="icon-play"></i> Take Snapshot</button>
										<button class="btn btn-danger" onClick="retakeSnapshot()" ng-click="eDisablers('retake')" ng-show="disablers.snapshot_taken"><i class="icon-undo"></i> Retake Snapshot</button>
									</div>
				                </div>
			              </div><!-- /.panel -->
			              <div class="dropzone col-md-11 col-md-offset-1"
						     ng-dropzone
						     dropzone="dropzone"
						     dropzone-config="ctrller.dropzoneConfig">
						     <div class="dropzone-previews"></div>
					  	</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-link" data-dismiss="modal" ng-click="newPatient = {}">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="patient_hospital_history" class="modal fade">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header bg-warning">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h6 class="modal-title">Hospital History Information</h6>
				</div>

				<div class="modal-body">
					<div class="row table-responsive">
						<fieldset>
							<div class="form-group col-md-4">
								<label class="control-label">Discharged To</label>
								<input type="text" class="form-control" ng-model="hospitalHistory.dischargedTo"/>
							</div>
							<div class="form-group col-md-4">
								<label class="control-label">Referred By</label>
								<input type="text" class="form-control" ng-model="hospitalHistory.referredBy"/>
							</div>
							<div class="form-group col-md-4">
								<label class="control-label">Physician or Surgeon</label>
								<input type="text" class="form-control" ng-model="hospitalHistory.physician"/>
							</div>
							<div class="form-group col-md-3">
								<label class="control-label">Ward or Clinic</label>
								<input type="text" class="form-control" ng-model="hospitalHistory.ward"/>
							</div>
							<div class="form-group col-md-3">
								<label class="control-label">Date attended or admitted</label>
								<input type="date" class="form-control" ng-model="hospitalHistory.dateAttended"/>
							</div>
							<div class="form-group col-md-3">
								<label class="control-label">Date Discharged</label>
								<input type="date" class="form-control" ng-model="hospitalHistory.dateDischarged"/>
							</div>
							<div class="form-group col-md-3">
								<label class="control-label">Health Condition</label>
								<select class="select" ng-model="hospitalHistory.healthCondition">
									<option value="Cured" selected="selected">Cured</option>
									<option value="Improved">Improved</option>
									<option value="Not Improved">Not Improved</option>
									<option value="Transferred">Transferred</option>
									<option value="Absconded">Absconded</option>
									<option value="Died">Died</option>
								</select>
							</div>
							<div class="form-group pull-right">
								<button class="btn btn-warning" ng-click="submitHospitalHistory()">Add to list</button>
							</div>
						</fieldset>
						<table class="col-md-12 table table-bordered table-condensed">
							<thead>
								<tr class="warning">
									<th>S/N</th>
									<th>Date attended/admitted</th>
									<th>Referred By</th>
									<th>Physician/Surgeon</th>
									<th>Ward/Clinic</th>
									<th>Date Discharged</th>
									<th>Discharged To</th>
									<th>Condition</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="history in newPatient.hospitalHistory">
									<td>{{$index+1}}</td>
									<td>{{history.dateAttended}}</td>
									<td>{{history.referredBy}}</td>
									<td>{{history.physician}}</td>
									<td>{{history.ward}}</td>
									<td>{{history.dateDischarged}}</td>
									<td>{{history.dischargedTo}}</td>
									<td>{{history.healthCondition}}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-link" data-dismiss="modal" ng-click="">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="patient_diagnosis" class="modal fade">
		<div class="modal-dialog modal-mini">
			<div class="modal-content">
				<div class="modal-header bg-warning">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h6 class="modal-title">Diagnosis Information</h6>
				</div>

				<div class="modal-body">
					<div class="row table-responsive">
						<fieldset>
							<div class="form-group col-md-6">
								<label class="control-label">Diagnosis Date</label>
								<input type="text" class="form-control" ng-model="diagnosis.date"/>
							</div>
							<div class="form-group col-md-6">
								<label class="control-label">Code Number</label>
								<input type="text" class="form-control" ng-model="diagnosis.codeNumber"/>
							</div>
							<div class="form-group col-md-12">
								<label class="control-label">Diagnosis</label>
								<textarea class="form-control" ng-model="diagnosis.diagnosis"></textarea>
							</div>
							<div class="form-group pull-right">
								<button class="btn btn-warning" ng-click="submitDiagnosis()">Add to list</button>
							</div>
						</fieldset>
						<table class="col-md-12 table table-bordered table-condensed">
							<thead>
								<tr class="warning">
									<th>S/N</th>
									<th>Diagnosis Date</th>
									<th>Code Number</th>
									<th>Diagnosis</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="diagnosis in newPatient.diagnosis">
									<td>{{$index+1}}</td>
									<td>{{diagnosis.date}}</td>
									<td>{{diagnosis.codeNumber}}</td>
									<td>{{diagnosis.diagnosis}}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-link" data-dismiss="modal" ng-click="">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="patient_operation" class="modal fade">
		<div class="modal-dialog modal-mini">
			<div class="modal-content">
				<div class="modal-header bg-warning">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h6 class="modal-title">Operation Information</h6>
				</div>

				<div class="modal-body">
					<div class="row table-responsive">
						<fieldset>
							<div class="form-group col-md-6">
								<label class="control-label">Operation Date</label>
								<input type="text" class="form-control" ng-model="operation.date"/>
							</div>
							<div class="form-group col-md-6">
								<label class="control-label">Code Number</label>
								<input type="text" class="form-control" ng-model="operation.codeNumber"/>
							</div>
							<div class="form-group col-md-12">
								<label class="control-label">Operation</label>
								<textarea class="form-control" ng-model="operation.operation"></textarea>
							</div>
							<div class="form-group pull-right">
								<button class="btn btn-warning" ng-click="submitOperation()">Add to list</button>
							</div>
						</fieldset>
						<table class="col-md-12 table table-bordered table-condensed">
							<thead>
								<tr class="warning">
									<th>S/N</th>
									<th>Operation Date</th>
									<th>Code Number</th>
									<th>Operation</th>
								</tr>
							</thead>
							<tbody>
								<tr ng-repeat="operation in newPatient.operation">
									<td>{{$index+1}}</td>
									<td>{{operation.date}}</td>
									<td>{{operation.codeNumber}}</td>
									<td>{{operation.operation}}</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-link" data-dismiss="modal" ng-click="">Close</button>
				</div>
			</div>
		</div>
	</div>

	<div id="patient_process_check" class="modal fade">
		<div class="modal-dialog modal-full">
			<div class="modal-content">
				<div class="modal-header bg-warning">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h6 class="modal-title">Process Check Information</h6>
				</div>

				<div class="modal-body">
					<div class="row table-responsive">
						<table class="col-md-12 table table-bordered table-condensed">
							<thead>
								<tr class="warning">
									<th>Process Check</th>
									<th>1<sup>st</sup> Admission Initials/Date</th>
									<th>2<sup>nd</sup> Admission Initials/Date</th>
									<th>3<sup>rd</sup> Admission Initials/Date</th>
									<th>4<sup>th</sup> Admission Initials/Date</th>
									<th>5<sup>th</sup> Admission Initials/Date</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th>Arrangement</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>Diagnosis Entry</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>Death Register</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>Coding</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>Indexing</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>Arrangement</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>I.D.C.A</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>F.H.S.2</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>P Tracer Card</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
								<tr>
									<th>Filing</th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
									<th contenteditable=""></th>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-link" data-dismiss="modal" ng-click="">Close</button>
					<button type="button" class="btn btn-warning">Add to process check list</button>
				</div>
			</div>
		</div>
	</div>
</div>


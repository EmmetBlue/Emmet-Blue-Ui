angular.module("EmmetBlue").controller("nursingSettingManageObservationTypeController",function(e,t){function n(e){editButtonAction="manage('edit',"+e.ObservationTypeID+")",deleteButtonAction="manage('delete',"+e.ObservationTypeID+")";var t="data-option-id='"+e.ObservationTypeID+"' data-option-name='"+e.ObservationTypeName+"' data-option-description='"+e.ObservationTypeDescription+"'";return editButton="<button class='btn btn-default' ng-click=\""+editButtonAction+'" '+t+"> <i class='fa fa-pencil'></i></button>",deleteButton="<button class='btn btn-default' ng-click=\""+deleteButtonAction+'" '+t+"> <i class='fa fa-trash-o'></i></button>","<div class='btn-group'>"+editButton+deleteButton+"</div>"}function o(){e.dtInstance.reloadData()}e.dtInstance={},e.dtOptions=t.DT.optionsBuilder.fromFnPromise(function(){return t.serverRequest("/nursing/observation-type/view","GET")}).withPaginationType("full_numbers").withDisplayLength(10).withFixedHeader().withOption("createdRow",function(n){t.compile(angular.element(n).contents())(e)}).withOption("headerCallback",function(n){e.headerCompiled||(e.headerCompiled=!0,t.compile(angular.element(n).contents())(e))}).withButtons([{text:'<i class="icon-file-plus"></i> New Observation Type',action:function(){$("#new_setting_observation_type").modal("show")}}]),e.dtColumns=[t.DT.columnBuilder.newColumn("ObservationTypeID").withTitle("ID"),t.DT.columnBuilder.newColumn("ObservationTypeName").withTitle("Observation Type Name"),t.DT.columnBuilder.newColumn("ObservationTypeDescription").withTitle("Observation Type Description"),t.DT.columnBuilder.newColumn(null).withTitle("Action").renderWith(n).notSortable()],e.saveNewObservationType=function(){var n=t.serverRequest("/nursing/observation-type/new","POST",e.newObservationType);n.then(function(){$("#new_setting_observation_type").modal("hide"),o(),t.notify("Operation Successful","New Observation Type Created Successfully","success"),e.newObservationType={}},function(e){t.errorHandler(e)})},e.saveEditObservationType=function(){var n=t.serverRequest("/nursing/observation-type/edit","PUT",e.tempHolder);n.then(function(){$("#edit_setting_observation_type").modal("hide"),o(),t.notify("Operation Successful","Observation type updated succesfully","success"),e.tempHolder={}},function(e){t.errorHandler(e)})},e.tempHolder={},e.manage=function(n,i){switch(n){case"edit":e.tempHolder.resourceId=i,e.tempHolder.ObservationTypeName=$(".btn[data-option-id='"+i+"']").attr("data-option-name"),e.tempHolder.ObservationTypeDescription=$(".btn[data-option-id='"+i+"']").attr("data-option-description"),$("#edit_setting_observation_type").modal("show");break;case"delete":var a="Delete Prompt",r="You are about to delete the Observation Type titled "+$(".btn[data-option-id='"+i+"']").attr("data-option-name")+". Do you want to continue? Please note that this action cannot be undone",s=!0,l=function(){var e=t.serverRequest("/nursing/observation-type/delete?"+t.serializeParams({resourceId:i}),"DELETE");e.then(function(){t.notify("Operation Successful","Observation Type has been deleted successfully","success"),o()},function(e){t.errorHandler(e)})},u="warning",c="Delete";t.confirm(a,r,s,l,u,c)}}});
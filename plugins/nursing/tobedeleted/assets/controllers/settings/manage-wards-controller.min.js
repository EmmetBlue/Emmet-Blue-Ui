angular.module("EmmetBlue").controller("nursingManageWardsController",function(t,e){function n(t){editButtonAction="manage('edit',"+t.WardID+")",deleteButtonAction="manage('delete',"+t.WardID+")",sectionButtonAction="manage('section',"+t.WardID+")";var e="data-option-id='"+t.WardID+"' data-option-name='"+t.WardName+"' data-option-description='"+t.WardDescription+"'";return editButton="<button class='btn btn-default' ng-click=\""+editButtonAction+'" '+e+"> <i class='fa fa-pencil'></i></button>",deleteButton="<button class='btn btn-default' ng-click=\""+deleteButtonAction+'" '+e+"> <i class='fa fa-trash-o'></i></button>",manageSectionButton="<button class='btn btn-default' ng-click=\""+sectionButtonAction+'" '+e+"> <i class='icon-atom2'></i> Manage Sections</button>","<div class='btn-group'>"+manageSectionButton+editButton+deleteButton+"</div>"}function o(){t.dtInstance.reloadData()}function i(t){editButtonAction="manage('editSection',"+t.WardSectionID+")",deleteButtonAction="manage('deleteSection',"+t.WardSectionID+")",sectionButtonAction="manage('section',"+t.WardSectionID+")";var e="data-option-id='"+t.WardSectionID+"' data-option-name='"+t.WardSectionName+"' data-option-description='"+t.WardSectionDescription+"'";return editButton="<button class='btn btn-default btn-section' ng-click=\""+editButtonAction+'" '+e+"> <i class='fa fa-pencil'></i></button>",deleteButton="<button class='btn btn-default btn-section' ng-click=\""+deleteButtonAction+'" '+e+"> <i class='fa fa-trash-o'></i></button>","<div class='btn-group'>"+editButton+deleteButton+"</div>"}function a(){t.dttInstance.reloadData()}t.dtInstance={},t.dtOptions=e.DT.optionsBuilder.fromFnPromise(function(){return e.serverRequest("/nursing/ward/view","GET")}).withPaginationType("full_numbers").withDisplayLength(10).withFixedHeader().withOption("createdRow",function(n){e.compile(angular.element(n).contents())(t)}).withOption("headerCallback",function(n){t.headerCompiled||(t.headerCompiled=!0,e.compile(angular.element(n).contents())(t))}).withButtons([{text:'<i class="icon-file-plus"></i> New Ward',action:function(){$("#new_ward").modal("show")}}]),t.dtColumns=[e.DT.columnBuilder.newColumn("WardID").withTitle("ID"),e.DT.columnBuilder.newColumn("WardName").withTitle("Ward Name"),e.DT.columnBuilder.newColumn("WardDescription").withTitle("Ward Description"),e.DT.columnBuilder.newColumn(null).withTitle("Action").renderWith(n).notSortable()],t.saveWard=function(){var n=e.serverRequest("/nursing/ward/new","POST",t.ward);n.then(function(){$("#new_ward").modal("hide"),o(),e.notify("Operation Successful","New Ward Registrated Successfully","success"),t.ward={}},function(t){e.errorHandler(t)})},t.saveEditWard=function(){var n=e.serverRequest("/nursing/ward/edit","PUT",t.tempHolder);n.then(function(){$("#edit_ward").modal("hide"),o(),e.notify("Operation Successful","Ward updated succesfully","success"),t.tempHolder={}},function(t){e.errorHandler(t)})},t.tempHolder={},t.manage=function(n,i){switch(n){case"edit":t.tempHolder.resourceId=i,t.tempHolder.WardName=$(".btn[data-option-id='"+i+"']").attr("data-option-name"),t.tempHolder.WardDescription=$(".btn[data-option-id='"+i+"']").attr("data-option-description"),$("#edit_ward").modal("show");break;case"delete":var r="Delete Prompt",c="You are about to delete the Ward titled "+$(".btn[data-option-id='"+i+"']").attr("data-option-name")+". Do you want to continue? Please note that this action cannot be undone",d=!0,s=function(){var t=e.serverRequest("/nursing/ward/delete?"+e.serializeParams({resourceId:i}),"DELETE");t.then(function(){e.notify("Operation Successful","Ward has been deleted successfully","success"),o()},function(t){e.errorHandler(t)})},u="warning",l="Delete";e.confirm(r,c,d,s,u,l);break;case"editSection":t.tempHolder.resourceId=i,t.tempHolder.WardSectionName=$(".btn-section[data-option-id='"+i+"']").attr("data-option-name"),t.tempHolder.WardSectionDescription=$(".btn-section[data-option-id='"+i+"']").attr("data-option-description"),$("#edit_section").modal("show");break;case"deleteSection":var r="Delete Prompt",c="You are about to delete the Ward Section titled "+$(".btn[data-option-id='"+i+"']").attr("data-option-name")+". Do you want to continue? Please note that this action cannot be undone",d=!0,s=function(){var t=e.serverRequest("/nursing/ward-section/delete?"+e.serializeParams({resourceId:i}),"DELETE");t.then(function(){e.notify("Operation Successful","Section has been deleted successfully","success"),a()},function(t){e.errorHandler(t)})},u="warning",l="Delete";e.confirm(r,c,d,s,u,l);break;case"section":t.currentWard=i,a(),$("#manage_sections").modal("show")}},t.dttInstance={},t.dttOptions=e.DT.optionsBuilder.fromFnPromise(function(){return e.serverRequest("/nursing/ward-section/view?resourceId="+t.currentWard,"GET")}).withPaginationType("full_numbers").withDisplayLength(10).withFixedHeader().withOption("createdRow",function(n){e.compile(angular.element(n).contents())(t)}).withOption("headerCallback",function(n){t.headerCompiled||(t.headerCompiled=!0,e.compile(angular.element(n).contents())(t))}).withButtons([{text:'<i class="icon-file-plus"></i> New Section',action:function(){$("#new_section").modal("show")}}]),t.dttColumns=[e.DT.columnBuilder.newColumn("WardSectionID").withTitle("ID"),e.DT.columnBuilder.newColumn("WardSectionName").withTitle("Section Name"),e.DT.columnBuilder.newColumn("WardSectionDescription").withTitle("Section Description"),e.DT.columnBuilder.newColumn(null).withTitle("Action").renderWith(i).notSortable()],t.saveSection=function(){t.section.ward=t.currentWard;var n=e.serverRequest("/nursing/ward-section/new","POST",t.section);n.then(function(){$("#new_section").modal("hide"),a(),e.notify("Operation Successful","New Section Registrated Successfully","success"),t.section={}},function(t){e.errorHandler(t)})},t.saveEditSection=function(){var n=e.serverRequest("/nursing/ward-section/edit","PUT",t.tempHolder);n.then(function(){$("#edit_section").modal("hide"),a(),e.notify("Operation Successful","Ward Section updated succesfully","success"),t.tempHolder={}},function(t){e.errorHandler(t)})}});
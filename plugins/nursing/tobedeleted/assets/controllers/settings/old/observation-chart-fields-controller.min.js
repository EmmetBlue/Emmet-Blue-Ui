angular.module("EmmetBlue").controller("observationChartFieldsController",function(e,t){var i={actionMarkups:{observationChartFieldTitleActionMarkup:function(e){var t="manageObservationChartField('edit', "+e.FieldTitleID+")",i="manageObservationChartField('delete', "+e.FieldTitleID+")",n="data-option-id='"+e.FieldTitleID+"' data-option-name='"+e.FieldTitleName+"' data-option-type='"+e.FieldTitleType+"' data-option-description='"+e.FieldTitleDescription+"'",a="<button class='btn btn-default' ng-click=\""+t+'" '+n+"> Edit</button>",o="<button class='btn btn-default' ng-click=\""+i+'" '+n+"> Delete</button>",r="<button class='btn btn-default'> View</button>",l="<div class='btn-group'>"+r+a+o+"</button>";return l}},newObservationChartFieldCreated:function(){t.alert("Operation Successful","You have successfully created a new observation Chart Field","success","notify"),e.newObservationChartField={},$("#setting_new_observation_chart_field").modal("hide"),e.reloadProfileRecordsTable()},observationChartFieldEdited:function(){t.alert("Operation Successful","Your changes have been saved successfully","success","notify"),e.tempHolder={},$("#setting_edit_observation_chart_field").modal("hide"),e.reloadProfileRecordsTable()},observationChartFieldDeleted:function(){t.alert("Operation Successful","The selected department groups have been deleted successfully","success","notify"),e.tempHolder={},delete e._recordId,e.reloadProfileRecordsTable()},manageObservationChartField:{newObservationChartField:function(){$("#setting_new_observation_chart_field").modal("show")},editObservationChartField:function(t){$("#setting_edit_observation_chart_field").modal("show"),e.tempHolder.name=$(".btn[data-option-id='"+t+"']").attr("data-option-name"),e.tempHolder.type=$(".btn[data-option-id='"+t+"']").attr("data-option-type"),e.tempHolder.description=$(".btn[data-option-id='"+t+"']").attr("data-option-description"),e.tempHolder.id=t},deleteObservationChartField:function(n){var a="Delete Prompt",o="You are about to delete the Observation Chart Field named "+$(".btn[data-option-id='"+n+"']").attr("data-option-name")+". Do you want to continue? Please note that this action cannot be undone",r=!0;e._fieldTitleId=n;var l=function(){var n=t.serverRequest("/nursing/observation-chart-field-title/delete?"+t.serializeParams({resourceId:e._fieldTitleId}),"DELETE");n.then(function(){i.observationChartFieldDeleted()},function(e){t.errorHandler(e)})},d="warning",s="Delete";t.confirm(a,o,r,l,d,s)},deleteAllSelectedProfileRecords:function(){var t=e.observationChartFieldSelector.selected;angular.forEach(t,function(e,t){e&&i.manageObservationChartField.deleteObservationChartField(t)})},viewObservationChartField:function(){}}};e.tempHolder={},e.settingsDtInstance={},e.settingsDtOptions=t.DT.optionsBuilder.fromFnPromise(function(){var e=t.serverRequest("/nursing/observation-chart-field-title/view","GET");return e}).withPaginationType("full_numbers").withDisplayLength(10).withFixedHeader().withOption("createdRow",function(i){t.compile(angular.element(i).contents())(e)}).withOption("headerCallback",function(i){e.headerCompiled||(e.headerCompiled=!0,t.compile(angular.element(i).contents())(e))}).withButtons([{text:"New Observation Chart Field",action:function(){i.manageObservationChartField.newObservationChartField()},key:{key:"n",ctrlKey:!1,altKey:!0}}]),e.settingsDtColumns=[t.DT.columnBuilder.newColumn("FieldTitleID").withTitle("Field Title ID").withOption("width","0.5%"),t.DT.columnBuilder.newColumn("FieldTitleName").withTitle("Field Title"),t.DT.columnBuilder.newColumn("FieldTitleType").withTitle("Field Type"),t.DT.columnBuilder.newColumn("FieldTitleDescription").withTitle("Description"),t.DT.columnBuilder.newColumn(null).withTitle("Action").renderWith(i.actionMarkups.observationChartFieldTitleActionMarkup).notSortable()],e.reloadProfileRecordsTable=function(){e.settingsDtInstance.reloadData()},e.saveNewObservationChartField=function(){var n=e.newObservationChartField,a=t.serverRequest("/nursing/observation-chart-field-title/new","POST",n);a.then(function(t){console.log(t),i.newObservationChartFieldCreated(),e.newObservationChartField={}},function(e){t.errorHandler(e)})},e.saveEditObservationChartField=function(){var n={resourceId:e.tempHolder.id,FieldTitleName:e.tempHolder.name,FieldTitleType:e.tempHolder.type,FieldTitleDescription:e.tempHolder.description},a=t.serverRequest("/nursing/observation-chart-field-title/edit","PUT",n);a.then(function(){i.observationChartFieldEdited()},function(e){t.errorHandler(e)})},e.manageObservationChartField=function(e,t){switch(e.toLowerCase()){case"edit":i.manageObservationChartField.editObservationChartField(t);break;case"delete":i.manageObservationChartField.deleteObservationChartField(t);break;case"role-management":i.manageObservationChartField.roleManagement(t)}}});
angular.module("EmmetBlue").controller("nursingSettingLinkConsultantDepartmentsController",function(e,t){function n(e){deleteButtonAction="manage('delete',"+e.ConsultantDepartmentID+")";var e="data-option-id='"+e.ConsultantDepartmentID+"' data-option-name='"+e.Name+"'";return deleteButton="<button class='btn btn-default btn-fields' ng-click=\""+deleteButtonAction+'"'+e+"> <i class='fa fa-close'></i> Remove from list</button>","<div class='btn-group'>"+deleteButton+"</div>"}function o(){e.dtInstance.reloadData()}function r(){var n=t.serverRequest("/human-resources/department/view","GET");n.then(function(t){e.departments=t},function(e){t.errorHandler(e)})}e.dtInstance={},e.dtOptions=t.DT.optionsBuilder.fromFnPromise(function(){return t.serverRequest("/nursing/consultant-department/view","GET")}).withPaginationType("full_numbers").withDisplayLength(10).withFixedHeader().withOption("createdRow",function(n){t.compile(angular.element(n).contents())(e)}).withOption("headerCallback",function(n){e.headerCompiled||(e.headerCompiled=!0,t.compile(angular.element(n).contents())(e))}),e.dtColumns=[t.DT.columnBuilder.newColumn("Name").withTitle("Currently Linked Departments"),t.DT.columnBuilder.newColumn(null).withTitle("Action").renderWith(n).notSortable()],r(),e.manage=function(e,n){switch(e){case"delete":var r="Delete Prompt",a="You are about to remove "+$(".btn-fields[data-option-id='"+n+"']").attr("data-option-name")+" from the doctors list. Do you want to continue?",i=!0,u=function(){var e=t.serverRequest("/nursing/consultant-department/delete?"+t.serializeParams({resourceId:n}),"DELETE");e.then(function(){t.notify("Operation Successful","The selected department has been unlinked successfully","success"),o()},function(e){t.errorHandler(e)})},l="warning",s="Delete";t.confirm(r,a,i,u,l,s)}},e.submit=function(){var n=e.department;t.serverRequest("/nursing/consultant-department/new","POST",{department:n}).then(function(){t.notify("Operation Successful","The selected department has been linked successfully","success"),o()},function(e){t.errorHandler(e)})}});